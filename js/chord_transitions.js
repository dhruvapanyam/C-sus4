// Style, time sginature, position in bar


transition_prob = {
    'happy': {
        '4/4': [{
            'I':   [40,     10,    10,    10,      10,      50],
            'ii':   [2,     4,      35,    3,      80,      3],
            'iii':   [3,     2,      4,      50,      4,      6],
            'IV':   [30,     4,      2.5,    4,      50,      30],
            'V':   [70,     2,      6,      35,    5,      65],
            'vi':   [56,   7,      6,      30,    40,      4],
        }, 
        {
            'I':   [20,     2.5,    2.5,    5,      5,      50],
            'ii':   [2,     4,      35,    3,      80,      3],
            'iii':   [3,     2,      4,      50,      4,      6],
            'IV':   [30,     4,      2.5,    4,      50,      30],
            'V':   [70,     2,      6,      35,    5,      65],
            'vi':   [56,   7,      6,      30,    40,      4],
        }, 
        {
            'I':   [20,     2.5,    2.5,    5,      5,      50],
            'ii':   [2,     4,      35,    3,      80,      3],
            'iii':   [3,     2,      4,      50,      4,      6],
            'IV':   [30,     4,      2.5,    4,      50,      30],
            'V':   [70,     2,      6,      35,    5,      65],
            'vi':   [56,   7,      6,      30,    40,      4],
        }, 
        {
            'I':   [20,     2.5,    2.5,    5,      5,      50],
            'ii':   [2,     4,      35,    3,      80,      3],
            'iii':   [3,     2,      4,      50,      4,      6],
            'IV':   [30,     4,      2.5,    4,      50,      30],
            'V':   [70,     2,      6,      35,    5,      65],
            'vi':   [56,   7,      6,      30,    40,      4],
        }
    ]
    },
    'sad': {
        '4/4': [{}, {}, {}, {}]
    },
    'jazz': {
        '4/4': [{}, {}, {}, {}]
    }
}

let transitions_string = 		
`40	10	0	10	50	50	20
50	10	0	10	40	50	10
0	0	0	0	0	0	0
40	10	0	10	50	50	10
50	10	0	10	50	40	10
60	10	0	10	40	50	10
50	10	0	10	40	40	10
						
20	10	0	10	60	60	10
50	10	0	10	40	70	10
0	0	0	0	0	0	0
30	10	0	10	60	70	10
50	10	0	10	50	60	10
40	10	0	10	50	40	10
30	10	0	10	50	70	10
						
40	10	0	10	30	50	10
60	10	0	10	10	60	10
0	0	0	0	0	0	0
60	10	0	10	30	60	10
60	10	0	10	30	60	10
60	10	0	10	30	60	10
60	10	0	10	20	60	10
						
30	20	0	10	60	60	10
50	10	0	10	50	50	10
0	0	0	0	0	0	0
50	10	0	10	50	50	10
60	10	0	10	50	40	10
60	10	0	10	50	30	20
50	10	0	10	50	50	10`

chord_trans = transitions_string.split(/[\t \n]+/)
//console.log(chord_trans)
trans_len = parseInt(chord_trans.length/4)
chord_trans = [...Array(4).keys()].map(i => chord_trans.slice(i*trans_len, (i+1)*trans_len))
// console.log(chord_trans)

c_names = ['I', 'ii', 'III', 'iii', 'IV', 'V', 'vi']
for(let i = 0; i < 4; i++) {
    for(let j = 0; j < c_names.length; j++) {
        transition_prob['happy']['4/4'][i][c_names[j]] = chord_trans[i].slice(j * c_names.length, (j + 1) * c_names.length).map(x => parseInt(x))
    }
}
// console.log(transition_prob)


transition_prob['happy']['4/4'][3]['V'][4] = 10
transition_prob['happy']['4/4'][0]['I'][4] = 10
transition_prob['happy']['4/4'][3]['V'][5] = 10

let sad_probs = 
`30	40	10	40	40	30	50
30	10	10	40	40	50	40
20	10	30	10	40	20	40
30	30	10	20	50	40	40
40	40	20	40	30	50	40
40	20	10	30	40	20	40
50	50	30	40	40	40	30
						
10	30	40	30	20	40	40
20	10	50	40	20	80	30
20	10	30	10	40	20	40
20	30	30	30	40	40	40
30	40	30	30	20	40	30
20	40	40	30	30	40	30
30	40	40	40	30	40	20
						
10	10	30	20	10	40	50
30	10	40	30	20	60	70
20	10	30	10	30	50	70
20	30	30	20	10	50	50
20	10	30	30	20	60	60
40	30	30	30	20	40	70
20	30	40	30	20	60	70
						
10	10	10	10	30	10	70
20	10	10	30	40	60	70
20	10	10	10	40	10	80
30	20	10	20	40	40	80
40	10	20	20	30	40	80
40	20	30	20	20	40	80
40	20	30	20	40	40	80
`

chord_trans = sad_probs.split(/[\t \n]+/)
// console.log(chord_trans)
trans_len = parseInt(chord_trans.length/4)
chord_trans = [...Array(4).keys()].map(i => chord_trans.slice(i*trans_len, (i+1)*trans_len))
//console.log(chord_trans)

for(let i = 0; i < 4; i++) {
    for(let j = 0; j < c_names.length; j++) {
        transition_prob['sad']['4/4'][i][c_names[j]] = chord_trans[i].slice(j * c_names.length, (j + 1) * c_names.length).map(x => parseInt(x))
    }
}
//console.log(transition_prob)


// 7-7 2-m7 0-M7 0 0-7 2-7 9-m7 9-7 0-m7 4-m7 5-7 2-%7 5-m7 10-7 4-7 5-M7 0-m 7-aug7 8-7 3-7
jazz_chord_str = "7-7 2-m7 0-M7 0-M 0-7 2-7 9-m7 9-7 0-m7 4-m7 5-7 2-%7 5-m7 10-7 4-7 5-M7 0-m 7-aug7 8-7 3-7"
jazz_c_names = jazz_chord_str.split(' ')


let jazz_probs = 
`360 1 26 28 4 0 0 0 3 3 1 1 0 0 0 0 8 1 0 0 
49 175 1 0 0 0 0 1 0 2 0 0 1 1 0 0 0 2 2 0 
0 7 131 2 5 0 6 3 3 2 1 1 0 0 0 0 0 1 0 0 
5 8 3 141 1 2 3 1 0 1 3 0 0 0 0 1 0 0 0 0 
3 0 0 0 136 1 0 1 0 0 6 1 2 0 0 8 0 0 0 0 
8 8 0 0 2 91 0 1 0 0 0 0 0 0 0 0 0 1 0 0 
0 13 0 0 0 20 82 0 0 0 0 2 0 0 0 0 0 0 2 0 
0 21 0 0 0 6 0 91 0 0 0 5 0 0 0 0 0 0 0 1 
1 0 0 0 1 3 0 0 79 0 2 2 4 0 0 0 0 0 2 0 
0 1 0 0 0 0 3 6 0 52 0 0 1 0 0 0 0 0 0 1 
1 1 0 0 6 2 0 0 0 2 81 0 0 2 0 0 0 0 0 0 
10 0 0 0 0 0 0 0 0 0 0 45 0 0 0 0 0 3 0 0 
1 0 1 0 1 0 0 0 1 1 0 1 47 7 0 0 0 0 0 0 
1 1 2 2 0 0 0 5 0 7 0 1 0 57 0 0 0 0 0 0 
0 0 0 0 0 0 4 1 0 2 1 0 0 0 55 0 0 0 0 2 
0 0 0 0 0 0 0 0 0 1 0 0 2 3 0 39 0 0 0 0 
0 0 0 0 0 0 0 0 1 0 0 1 5 0 0 0 45 0 2 0 
1 0 4 0 0 0 0 0 6 0 0 0 0 0 0 0 5 48 0 0 
6 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 2 29 0 
0 2 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 41 

370 9 17 22 8 3 0 0 6 3 2 0 0 0 0 0 5 1 0 0 
43 190 1 0 0 0 0 1 0 2 0 0 2 1 0 0 0 0 2 0 
0 7 122 5 4 0 9 0 3 1 0 1 2 0 4 3 0 1 0 0 
1 5 7 137 3 0 6 5 0 1 3 0 0 0 1 0 0 0 0 0 
2 0 1 1 129 1 0 4 0 0 10 0 4 0 0 1 0 0 0 0 
5 3 1 0 1 104 2 0 0 0 0 0 0 0 1 0 0 1 2 1 
0 10 0 0 0 12 71 0 0 0 0 0 0 0 2 0 0 0 2 1 
0 13 0 0 0 8 2 87 0 0 0 1 0 0 1 0 0 0 0 0 
0 0 0 0 1 3 0 0 74 0 2 3 4 0 0 0 0 1 2 0 
0 1 0 0 0 0 8 14 0 53 0 0 0 0 0 1 0 0 0 1 
1 0 1 0 3 0 0 0 0 1 84 0 0 1 2 0 0 0 0 0 
9 0 1 0 1 1 0 0 0 1 0 47 0 0 0 0 0 6 0 0 
3 0 2 0 1 0 0 0 1 0 0 0 47 11 2 0 0 0 0 0 
0 2 1 0 0 0 2 2 0 3 0 0 0 58 0 0 0 0 0 0 
0 0 0 0 0 0 10 1 0 0 0 0 0 0 47 0 0 0 0 0 
1 0 0 1 0 0 0 1 0 1 0 0 2 3 0 37 0 0 0 0 
0 0 0 2 3 0 0 2 1 0 0 3 0 0 0 0 45 0 0 0 
1 0 3 0 0 0 0 0 2 0 0 0 0 0 0 0 1 51 0 0 
3 1 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 34 0 
0 2 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0 3 34 

339 5 30 26 6 0 1 0 6 5 1 2 0 1 0 0 9 1 0 0 
52 186 0 0 0 1 0 0 0 4 0 3 1 0 0 0 0 2 3 0 
0 7 120 3 1 1 5 2 1 3 2 2 0 0 0 4 0 0 0 0 
2 4 3 128 3 0 7 2 1 1 2 0 0 0 1 0 0 0 0 0 
1 2 3 0 136 0 1 1 0 0 7 0 0 0 1 10 0 0 0 0 
15 3 0 0 2 105 1 1 0 0 0 1 0 0 0 0 0 3 0 0 
0 9 0 0 0 16 90 0 0 0 0 0 0 0 1 0 0 0 1 2 
0 19 0 0 0 2 2 93 0 0 0 4 0 0 0 0 0 0 0 0 
1 1 1 0 1 2 0 0 69 0 5 3 2 0 0 0 0 0 0 0 
0 1 0 0 0 0 6 6 0 48 0 0 2 0 0 1 0 0 0 0 
1 1 0 1 8 0 0 0 0 5 76 0 4 2 1 0 0 0 0 0 
7 0 1 0 0 0 0 0 0 0 0 50 0 0 0 0 0 2 0 0 
1 0 0 0 1 0 0 0 0 0 0 0 51 6 1 0 0 0 0 0 
0 0 1 0 0 0 0 3 0 2 0 2 1 60 0 0 0 0 0 1 
1 0 0 0 0 0 8 5 0 0 0 0 0 0 54 1 0 0 0 0 
1 2 0 0 0 0 0 0 0 1 0 0 2 3 0 28 0 0 0 0 
0 0 0 0 1 1 0 0 0 0 0 2 1 0 0 0 44 0 0 0 
1 0 0 0 0 0 0 0 9 0 0 0 0 0 0 0 2 50 0 0 
3 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 41 0 
0 5 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 2 30 

337 6 22 29 11 0 0 0 6 2 1 0 0 0 1 0 2 2 0 0 
53 182 2 0 0 1 0 1 0 2 0 2 1 1 0 0 0 0 0 0 
0 7 128 6 0 0 5 2 3 4 0 0 0 1 1 0 0 0 0 0 
1 6 4 135 5 1 2 1 0 0 1 0 0 1 0 0 0 0 0 0 
3 1 2 0 132 1 0 4 0 0 10 0 2 0 0 9 0 0 0 0 
10 5 1 0 1 93 3 0 0 0 0 2 0 0 0 0 0 3 0 0 
0 9 1 0 1 12 99 0 0 0 0 1 0 0 1 0 0 0 1 0 
0 7 0 0 0 5 0 102 0 0 0 2 0 0 0 0 0 0 0 0 
0 0 0 0 0 3 0 0 71 0 3 1 1 0 0 0 0 1 0 0 
0 0 0 0 0 0 5 10 0 53 0 0 0 0 0 1 0 0 0 3 
0 0 2 1 3 1 0 0 0 1 78 0 1 0 1 0 0 0 0 0 
15 0 1 0 0 0 0 0 0 2 0 49 0 0 0 0 0 7 0 0 
0 0 0 0 1 0 0 0 2 0 0 0 52 8 0 0 0 0 0 0 
0 3 1 0 0 0 1 1 0 1 0 0 0 63 0 0 0 0 0 1 
0 0 0 0 0 0 4 1 0 0 1 0 0 0 58 0 0 0 0 0 
1 1 0 0 0 0 0 0 0 0 0 0 1 3 0 37 0 0 0 0 
2 2 2 2 1 0 0 0 2 0 0 1 0 0 0 0 45 0 0 0 
3 0 3 0 0 0 0 0 8 0 0 0 0 0 0 0 0 45 1 0 
6 1 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 5 36 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 37 
`

chord_trans = jazz_probs.split(/[\t \n]+/)
//console.log(chord_trans)
trans_len = parseInt(chord_trans.length/4)
chord_trans = [...Array(4).keys()].map(i => chord_trans.slice(i*trans_len, (i+1)*trans_len))
//console.log(chord_trans)

for(let i = 0; i < 4; i++) {
    for(let j = 0; j < jazz_c_names.length; j++) {
        transition_prob['jazz']['4/4'][i][jazz_c_names[j]] = chord_trans[i].slice(j * jazz_c_names.length, (j + 1) * jazz_c_names.length).map(x => parseInt(x))
    }
}
//console.log(transition_prob)