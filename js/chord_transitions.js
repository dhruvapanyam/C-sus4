// Style, time sginature, position in bar


transition_prob = {
    'happy': {
        '4/4': [{
            'I':   [40,     10,    10,    10,      10,      50],
            'ii':   [2,     4,      35,    3,      80,      3],
            'iii':   [3,     2,      4,      50,      4,      6],
            'IV':   [30,     4,      2.5,    4,      50,      30],
            'V':   [70,     2,      6,      35,    5,      65],
            'vi':   [56,   7,      6,      30,    40,      4],
        }, 
        {
            'I':   [20,     2.5,    2.5,    5,      5,      50],
            'ii':   [2,     4,      35,    3,      80,      3],
            'iii':   [3,     2,      4,      50,      4,      6],
            'IV':   [30,     4,      2.5,    4,      50,      30],
            'V':   [70,     2,      6,      35,    5,      65],
            'vi':   [56,   7,      6,      30,    40,      4],
        }, 
        {
            'I':   [20,     2.5,    2.5,    5,      5,      50],
            'ii':   [2,     4,      35,    3,      80,      3],
            'iii':   [3,     2,      4,      50,      4,      6],
            'IV':   [30,     4,      2.5,    4,      50,      30],
            'V':   [70,     2,      6,      35,    5,      65],
            'vi':   [56,   7,      6,      30,    40,      4],
        }, 
        {
            'I':   [20,     2.5,    2.5,    5,      5,      50],
            'ii':   [2,     4,      35,    3,      80,      3],
            'iii':   [3,     2,      4,      50,      4,      6],
            'IV':   [30,     4,      2.5,    4,      50,      30],
            'V':   [70,     2,      6,      35,    5,      65],
            'vi':   [56,   7,      6,      30,    40,      4],
        }
    ]
    },
    'sad': {
        '4/4': [{}, {}, {}, {}]
    },
    'jazz_major': {
        '4/4': [{}, {}, {}, {}]
    },
    'jazz_minor': {
        '4/4': [{}, {}, {}, {}]
    },
}

let transitions_string = 		
`40	10	0	10	50	50	20
50	10	0	10	40	50	10
0	0	0	0	0	0	0
40	10	0	10	50	50	10
50	10	0	10	50	40	10
60	10	0	10	40	50	10
50	10	0	10	40	40	10
						
20	10	0	10	60	60	10
50	10	0	10	40	70	10
0	0	0	0	0	0	0
30	10	0	10	60	70	10
50	10	0	10	50	60	10
40	10	0	10	50	40	10
30	10	0	10	50	70	10
						
40	10	0	10	30	50	10
60	10	0	10	10	60	10
0	0	0	0	0	0	0
60	10	0	10	30	60	10
60	10	0	10	30	60	10
60	10	0	10	30	60	10
60	10	0	10	20	60	10
						
30	20	0	10	60	60	10
50	10	0	10	50	50	10
0	0	0	0	0	0	0
50	10	0	10	50	50	10
60	10	0	10	50	40	10
60	10	0	10	50	30	20
50	10	0	10	50	50	10`

chord_trans = transitions_string.split(/[\t \n]+/)
//console.log(chord_trans)
trans_len = parseInt(chord_trans.length/4)
chord_trans = [...Array(4).keys()].map(i => chord_trans.slice(i*trans_len, (i+1)*trans_len))
// console.log(chord_trans)

c_names = ['I', 'ii', 'III', 'iii', 'IV', 'V', 'vi']
for(let i = 0; i < 4; i++) {
    for(let j = 0; j < c_names.length; j++) {
        transition_prob['happy']['4/4'][i][c_names[j]] = chord_trans[i].slice(j * c_names.length, (j + 1) * c_names.length).map(x => parseInt(x))
    }
}
// console.log(transition_prob)


transition_prob['happy']['4/4'][3]['V'][4] = 10
transition_prob['happy']['4/4'][0]['I'][4] = 10
transition_prob['happy']['4/4'][3]['V'][5] = 10

let sad_probs = 
`30	40	10	40	40	30	50
30	10	10	40	40	50	40
20	10	30	10	40	20	40
30	30	10	20	50	40	40
40	40	20	40	30	50	40
40	20	10	30	40	20	40
50	50	30	40	40	40	30
						
10	30	40	30	20	40	40
20	10	50	40	20	80	30
20	10	30	10	40	20	40
20	30	30	30	40	40	40
30	40	30	30	20	40	30
20	40	40	30	30	40	30
30	40	40	40	30	40	20
						
10	10	30	20	10	40	50
30	10	40	30	20	60	70
20	10	30	10	30	50	70
20	30	30	20	10	50	50
20	10	30	30	20	60	60
40	30	30	30	20	40	70
20	30	40	30	20	60	70
						
10	10	10	10	30	10	70
20	10	10	30	40	60	70
20	10	10	10	40	10	80
30	20	10	20	40	40	80
40	10	20	20	30	40	80
40	20	30	20	20	40	80
40	20	30	20	40	40	80
`

chord_trans = sad_probs.split(/[\t \n]+/)
// console.log(chord_trans)
trans_len = parseInt(chord_trans.length/4)
chord_trans = [...Array(4).keys()].map(i => chord_trans.slice(i*trans_len, (i+1)*trans_len))
//console.log(chord_trans)

for(let i = 0; i < 4; i++) {
    for(let j = 0; j < c_names.length; j++) {
        transition_prob['sad']['4/4'][i][c_names[j]] = chord_trans[i].slice(j * c_names.length, (j + 1) * c_names.length).map(x => parseInt(x))
    }
}
//console.log(transition_prob)


// 7-7 2-m7 0-M7 0 0-7 2-7 9-m7 9-7 0-m7 4-m7 5-7 2-%7 5-m7 10-7 4-7 5-M7 0-m 7-aug7 8-7 3-7
// jazz_chord_str = "7-7 2-m7 0-M7 0-M 0-7 2-7 9-m7 9-7 0-m7 4-m7 5-7 2-%7 5-m7 10-7 4-7 5-M7 0-m 7-aug7 8-7 3-7"
jazz_c_names = ['7-7', '2-m7', '0-M', '0-M7', '0-7', '9-m7', '9-7', '2-7', '4-m7', '5-7', '4-7', '10-7', '5-M7', '7-m7', '3-o7', '5-m7', '2-%7', '3-7', '5-M', '8-M7']


let jazz_probs = 
`294 4 29 19 6 0 0 2 1 1 1 1 0 2 0 0 0 0 0 0 
49 173 0 0 0 0 0 0 2 0 0 0 0 1 0 0 3 0 0 0 
4 5 105 0 0 4 2 2 1 3 1 0 1 4 0 0 0 0 1 0 
0 4 3 113 0 5 3 0 4 2 2 0 1 3 1 0 2 0 0 0 
0 0 0 0 102 0 2 1 0 5 0 0 9 0 0 0 0 0 3 0 
0 8 0 0 1 78 0 11 0 0 0 0 0 0 0 0 2 0 0 0 
0 15 0 0 0 1 81 5 0 0 1 0 0 0 0 0 4 1 0 0 
7 7 0 0 1 3 0 78 0 0 0 0 0 0 0 0 0 0 0 0 
0 1 0 0 0 5 12 0 41 0 0 0 0 0 3 2 0 0 0 0 
1 1 0 0 9 0 0 0 3 73 2 2 0 0 0 0 0 0 0 0 
0 0 0 0 0 2 0 0 1 0 48 0 0 0 0 0 0 0 0 0 
0 1 0 2 0 0 4 0 3 0 0 38 0 0 0 0 0 0 0 0 
1 0 0 0 0 0 0 0 1 0 0 3 24 0 0 2 0 0 0 0 
0 0 0 0 5 0 0 0 0 0 0 0 0 14 0 0 0 0 0 0 
0 6 3 0 0 0 0 0 2 0 3 0 0 0 22 0 0 0 0 0 
0 0 0 0 1 0 0 0 0 0 1 8 0 0 0 17 0 0 0 1 
2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 20 0 0 0 
0 2 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 19 0 1 
1 0 0 0 0 0 0 0 0 0 1 2 0 0 0 0 0 0 14 0 
2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 2 0 0 0 18 


286 9 20 22 6 0 0 0 5 0 0 0 0 4 0 0 2 0 0 0 
45 172 0 0 0 0 0 1 4 0 0 1 0 0 1 3 0 0 0 0 
0 4 115 0 0 4 0 1 1 2 0 0 0 2 1 0 0 0 4 0 
0 10 3 105 5 6 0 0 1 0 0 0 1 2 2 0 0 0 0 0 
3 3 0 0 86 0 3 0 0 10 1 0 8 0 0 0 1 0 4 0 
0 14 0 0 0 66 0 15 0 0 1 0 0 0 0 0 0 0 0 0 
0 10 0 0 0 1 92 4 0 0 0 0 0 0 0 0 1 0 0 0 
7 6 0 1 2 0 1 70 0 0 0 0 0 0 5 0 0 1 0 0 
0 0 0 0 0 5 11 0 42 0 0 0 1 0 2 0 0 2 0 0 
0 0 0 2 2 0 0 1 2 77 0 0 0 0 0 3 0 0 0 0 
1 0 0 0 0 8 7 0 0 0 50 0 0 0 0 0 0 1 0 0 
0 1 0 0 0 2 5 0 1 0 0 45 0 0 0 1 0 0 0 0 
1 2 1 0 0 0 0 0 1 0 0 4 26 0 0 0 0 0 0 0 
0 0 0 0 8 0 0 0 0 0 0 0 0 17 0 0 0 0 0 0 
0 6 0 0 0 0 0 0 1 0 0 0 0 0 19 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 1 2 0 0 0 19 0 0 0 2 
3 0 0 1 0 0 0 0 4 0 0 0 0 0 0 0 23 0 0 0 
0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 17 0 7 
0 0 1 0 0 0 0 0 0 0 0 2 0 0 0 0 0 0 12 0 
2 1 0 0 0 0 0 0 0 0 0 0 0 0 0 2 0 0 0 15 


288 3 26 20 5 0 0 0 2 2 0 0 0 0 0 0 0 0 0 0 
56 173 0 3 0 0 0 0 2 0 0 1 0 0 1 0 0 0 0 0 
3 7 91 3 6 6 4 0 1 0 0 1 0 2 2 0 0 0 4 0 
0 6 3 85 4 12 2 1 3 1 3 1 0 1 2 2 1 0 0 0 
2 0 0 0 90 1 1 1 0 6 0 0 5 0 0 0 0 0 5 0 
0 5 0 1 0 70 0 14 0 0 1 0 0 0 0 0 0 0 0 0 
0 16 0 0 0 2 101 6 0 0 0 0 0 0 0 0 2 0 0 0 
9 3 0 0 1 2 0 74 0 0 0 0 0 2 0 0 0 0 0 0 
0 1 0 0 0 4 4 0 53 0 0 0 1 0 1 1 0 0 0 0 
1 1 2 0 6 0 0 2 1 73 1 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 2 0 0 0 2 48 0 0 0 0 0 0 1 0 0 
1 0 1 1 0 0 1 0 6 0 0 44 0 0 0 0 0 0 0 0 
1 1 0 0 0 0 1 0 1 0 0 2 30 0 0 1 0 0 0 0 
0 0 0 0 6 0 0 0 0 0 0 0 0 19 0 0 0 0 0 0 
0 4 0 0 0 0 0 0 3 0 0 0 0 0 22 0 0 0 0 0 
0 0 0 1 1 0 0 0 0 0 0 2 0 0 0 24 0 0 0 1 
6 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 19 0 0 0 
0 2 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 20 0 2 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 19 0 
2 1 0 0 0 0 0 0 0 0 0 0 0 0 0 4 0 0 0 17 


294 5 32 25 7 1 0 1 1 2 0 0 0 1 0 0 1 0 0 0 
43 167 0 1 0 0 1 0 2 0 0 1 0 0 4 2 0 0 0 0 
0 6 83 1 5 5 2 2 0 3 1 0 0 2 0 0 0 0 2 1 
0 7 4 92 0 1 2 0 1 0 0 0 1 2 0 0 1 0 0 0 
4 0 0 1 94 0 4 1 0 10 0 0 4 0 0 0 0 0 1 0 
0 11 0 0 0 79 0 13 0 0 0 0 0 1 0 0 1 0 0 0 
0 18 0 0 0 0 87 5 0 0 0 0 0 0 0 0 3 0 0 0 
9 3 0 1 2 1 1 77 0 0 0 0 0 0 2 0 0 0 0 0 
0 1 0 0 0 4 9 0 53 0 0 0 1 0 4 0 0 2 0 0 
1 0 0 1 3 0 0 0 3 73 1 1 0 0 0 0 0 0 0 0 
0 0 0 0 0 5 1 0 1 0 46 0 1 0 0 0 0 0 0 0 
0 4 2 2 0 1 1 0 3 0 0 36 0 1 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 0 0 0 2 28 0 0 0 0 0 0 0 
0 0 0 0 10 0 0 0 0 0 0 0 0 14 0 0 0 0 0 0 
0 4 0 0 0 0 0 0 0 0 0 0 0 0 25 0 0 0 0 0 
0 0 0 2 0 0 0 0 0 0 1 3 0 0 0 24 0 0 0 2 
7 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 15 0 0 0 
0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 19 0 5 
1 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 21 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 17 
`

chord_trans = jazz_probs.split(/[\t \n]+/)
//console.log(chord_trans)
trans_len = parseInt(chord_trans.length/4)
chord_trans = [...Array(4).keys()].map(i => chord_trans.slice(i*trans_len, (i+1)*trans_len))
//console.log(chord_trans)

for(let i = 0; i < 4; i++) {
    for(let j = 0; j < jazz_c_names.length; j++) {
        transition_prob['jazz_major']['4/4'][i][jazz_c_names[j]] = chord_trans[i].slice(j * jazz_c_names.length, (j + 1) * jazz_c_names.length).map(x => parseInt(x))
    }
}
//console.log(transition_prob)


jazz_c_names = ['0-m7', '7-7', '2-%7', '0-m', '5-m7', '7-aug7', '2-7', '0-7', '8-7', '10-7', '3-7', '5-m', '8-M7', '2-m7', '9-%7', '3-M7', '10-m7', '9-aug7', '0-#5,m7', '0-M7']


jazz_probs = 
`66 1 2 0 4 0 3 1 2 0 0 0 2 0 1 0 1 0 2 0 
3 59 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 
0 7 28 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
1 0 1 40 5 0 0 0 2 0 0 0 0 0 1 0 0 0 0 0 
1 1 1 0 22 0 0 1 0 4 0 0 1 0 0 0 0 0 0 0 
6 0 0 5 0 35 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 1 0 0 0 1 24 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 2 0 0 27 0 0 0 3 0 0 0 0 0 0 0 0 
1 1 0 0 0 1 0 0 16 0 0 0 0 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 17 0 0 0 0 0 1 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 18 0 0 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 1 0 0 0 11 0 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 0 0 0 12 0 0 0 0 0 0 0 
0 1 0 0 0 1 0 0 0 0 0 0 0 10 0 0 0 0 0 0 
0 0 0 0 0 0 1 0 2 0 0 0 0 0 7 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 8 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 7 0 0 0 
0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 9 0 0 
1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 5 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 5 


59 0 3 0 4 1 3 0 2 0 0 0 0 0 3 0 0 0 1 0 
6 56 0 5 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0 
0 6 26 0 0 6 1 0 0 0 0 0 0 0 0 0 0 0 0 0 
1 0 3 38 0 0 0 2 0 0 0 1 0 0 1 0 0 0 0 0 
1 3 0 0 28 0 0 0 0 5 0 0 0 0 0 0 0 0 0 0 
2 1 0 1 0 37 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 1 25 0 1 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 4 0 0 23 0 0 0 2 0 0 0 0 0 0 0 0 
0 1 0 0 0 0 1 0 21 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 19 0 0 0 0 0 1 0 0 0 0 
0 0 0 0 0 0 0 0 3 0 12 0 2 1 0 0 0 0 0 0 
0 0 0 0 1 0 0 2 0 0 0 11 0 0 0 0 0 0 0 0 
2 1 0 0 0 0 0 0 0 0 0 0 12 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 9 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 1 0 0 0 0 0 6 0 0 0 0 0 
0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 6 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 2 0 0 0 0 0 7 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 9 0 0 
1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 6 0 
1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 6 


56 1 3 0 2 0 2 1 0 0 0 0 2 0 3 0 1 0 3 0 
6 50 0 9 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 
0 3 31 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 2 37 1 0 1 1 0 0 0 2 0 0 0 0 0 0 0 0 
0 1 0 0 31 0 0 1 0 2 0 0 1 0 0 0 0 0 0 0 
9 0 0 2 0 34 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 3 1 0 0 2 23 0 0 0 0 0 0 1 0 0 0 0 0 0 
0 0 0 0 0 0 0 29 0 0 0 1 0 0 0 0 0 0 0 0 
0 1 0 0 0 0 0 0 26 0 0 0 0 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 18 1 0 0 0 0 3 0 0 0 0 
0 0 0 0 0 0 1 0 2 0 9 0 1 0 0 0 0 0 0 0 
0 0 0 3 0 0 0 2 0 0 0 9 0 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 0 0 0 14 0 0 0 0 0 0 0 
0 2 1 0 0 0 1 0 1 0 0 0 0 7 0 0 0 0 0 0 
0 0 2 0 0 0 1 0 0 0 0 0 0 0 7 0 0 0 0 0 
2 0 1 0 0 0 1 0 0 0 0 0 0 0 0 3 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 5 0 0 0 0 0 2 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 9 0 0 
1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 6 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 6 


60 0 1 0 1 1 3 0 0 0 0 0 0 0 1 0 1 0 1 0 
6 52 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 
0 7 32 0 0 7 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
2 2 1 40 0 0 0 1 0 0 0 0 0 2 1 0 0 0 0 0 
2 0 0 0 26 0 0 0 0 4 0 0 0 0 0 0 3 0 0 0 
7 1 0 0 0 30 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 1 2 0 0 3 23 0 0 0 0 0 0 1 0 0 0 0 0 0 
0 0 0 0 2 0 0 31 0 0 0 5 0 0 0 0 0 0 0 0 
1 5 0 0 0 5 0 0 18 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 16 1 0 0 0 0 3 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 16 0 0 0 0 0 0 0 0 0 
0 2 0 1 1 0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 
1 1 1 0 0 0 0 0 0 0 0 0 14 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 0 0 0 0 8 0 0 0 1 0 0 
0 0 1 0 0 0 1 0 0 0 0 0 0 0 8 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 5 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 2 0 0 0 0 0 2 0 0 0 
0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 9 0 0 
2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 5 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 
`

chord_trans = jazz_probs.split(/[\t \n]+/)
//console.log(chord_trans)
trans_len = parseInt(chord_trans.length/4)
chord_trans = [...Array(4).keys()].map(i => chord_trans.slice(i*trans_len, (i+1)*trans_len))
//console.log(chord_trans)

for(let i = 0; i < 4; i++) {
    for(let j = 0; j < jazz_c_names.length; j++) {
        transition_prob['jazz_minor']['4/4'][i][jazz_c_names[j]] = chord_trans[i].slice(j * jazz_c_names.length, (j + 1) * jazz_c_names.length).map(x => parseInt(x))
    }
}
//console.log(transition_prob)